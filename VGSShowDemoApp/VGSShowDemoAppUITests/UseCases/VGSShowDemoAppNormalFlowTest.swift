//
//  VGSShowDemoAppNormalFlowTest.swift
//  VGSShowDemoAppUITests
//

import Foundation
import XCTest

class VGSShowDemoAppNormalFlowTest: VGSBaseRegularFlowTestCase {

	func testCorrectDataFlow() {
		// Open collect screen.
		navigateToCollectScreen()

		// Type data.
		fillInCorrectCardData()

		// Collect data.
		tapToCollectData()

		// Open show screen.
		navigateToShowScreen()

		// Wait until switch screen.
		wait(forTimeInterval: 0.3)

		// Verify unrevealed state.
		testVGSShowState(.unrevealed, isSecuredCardNumber: false)

		// Reveal data.
		tapToShowData()

		// Verify revealed state and secured mask is applied.
		testVGSShowState(.revealed, isSecuredCardNumber: true)

		// Tap to hide secure mask.
		tapToCopyCardNumber()

		// Verify revealed state and secured mask is not applied.
		testVGSShowState(.revealed, isSecuredCardNumber: false)

		// For debug.
		wait(forTimeInterval: 1)
	}

	func testErrorFlow() {
		// Open collect screen.
		navigateToCollectScreen()

		// Type data.
		fillInWrongCardData()

		// Collect data.
		tapToCollectData()

		// Open show screen.
		navigateToShowScreen()

		// Wait until switch screen.
		wait(forTimeInterval: 0.3)

		// Verify unrevealed state.
		testVGSShowState(.unrevealed, isSecuredCardNumber: true)

		// Reveal data.
		tapToShowData()

		// Verify we still in unrevealed state.
		testVGSShowState(.unrevealed, isSecuredCardNumber: true)

		// For debug.
		wait(forTimeInterval: 1)
	}
}
